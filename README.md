# 中国象棋 AI对战游戏

一个纯前端实现的中国象棋游戏，支持手机端，用户可与具备中等水平的AI对手进行对局。

## 🎮 在线体验

直接打开 `index.html` 即可在浏览器中游玩，无需任何服务器或后端支持。

## ✨ 功能特点

### 1. 完整的象棋规则
- ✅ **将/帅**：宫内移动，不能被将死
- ✅ **士/仕**：宫内对角线移动
- ✅ **象/相**：同色区域移动，不能过河，塞象眼
- ✅ **马**：日字走棋，蹩马脚
- ✅ **车/車**：横竖无限移动
- ✅ **炮/砲**：横竖移动，吃子需跳过一个棋子
- ✅ **兵/卒**：未过河向前，过河可横走

### 2. 智能AI对手
- 🤖 中等难度的AI引擎
- 📊 棋子价值评估系统
- 🎯 优先吃子和防守策略
- 🏰 控制中心位置加分
- 🎲 适度随机性避免过于呆板

### 3. 友好的用户界面
- 📱 完全适配手机端（响应式设计）
- 🖱️ 支持触摸和鼠标操作
- 🎨 美观的中国风界面
- ✨ 可视化显示选中棋子和可走位置
- 📍 显示上一步走棋位置

### 4. 游戏功能
- 🔄 重新开始
- ↩️ 悔棋功能（撤销两步）
- 🏁 自动判定将死和胜负
- 💬 游戏状态实时提示

## 📁 项目结构

```
chinese-chess-ai/
├── index.html          # 主页面
├── css/
│   └── style.css       # 样式表（响应式设计）
├── js/
│   ├── utils.js        # 工具函数
│   ├── rules.js        # 象棋规则引擎
│   ├── ai.js           # AI对手逻辑
│   ├── board.js        # 棋盘渲染与交互
│   └── game.js         # 游戏主逻辑
└── README.md           # 项目说明
```

## 🚀 快速开始

1. **克隆或下载项目**
```bash
git clone <repository-url>
cd chinese-chess-ai
```

2. **直接打开游戏**
   - 方式1：双击 `index.html` 文件
   - 方式2：使用本地服务器
```bash
# 使用 Python
python -m http.server 8000

# 使用 Node.js
npx http-server
```

3. **开始游玩**
   - 点击红方棋子选中
   - 点击绿色标记的位置移动
   - AI会自动应对你的走棋

## 🎯 游戏玩法

1. **选择棋子**：点击/触摸红方的棋子
2. **查看可走位置**：绿色圆点表示该棋子可以移动到的位置
3. **移动棋子**：点击/触摸目标位置
4. **AI走棋**：AI会在短暂思考后自动走棋
5. **悔棋**：点击"悔棋"按钮可撤销你和AI各走的一步
6. **重新开始**：点击"重新开始"按钮开始新的一局

## 🛠️ 技术实现

### 核心模块

#### 1. Utils (utils.js)
- 棋盘坐标验证
- 棋子位置判断（宫内、过河等）
- 棋子价值计算
- 位置价值评估

#### 2. Rules (rules.js)
- 各类棋子的走法规则
- 合法棋步生成
- 将军和将死判定
- 走棋合法性验证

#### 3. AI (ai.js)
- 评估函数：棋子价值、位置价值、吃子机会
- 威胁检测：识别被攻击的棋子
- 防守意识：保护重要棋子
- 战术优化：控制中心、保持棋子协作

#### 4. Board (board.js)
- Canvas渲染引擎
- 响应式布局适配
- 触摸和鼠标事件处理
- 可视化高亮显示

#### 5. Game (game.js)
- 游戏流程控制
- 玩家回合管理
- 胜负判定
- 悔棋和重新开始

## 📱 移动端优化

- 响应式Canvas大小调整
- 触摸事件完整支持
- 合适的棋子和按钮尺寸
- 横竖屏适配
- 防止误触和缩放

## 🎨 界面特色

- 渐变背景和阴影效果
- 中国风配色方案
- 红黑双方棋子区分
- 流畅的动画过渡
- 清晰的状态提示

## 🔧 自定义调整

### 修改AI难度

在 `js/ai.js` 中调整评估权重：

```javascript
// 增加吃子优先级
score += Utils.getPieceValue(target.type) * 15; // 默认10

// 调整随机性
const topMoves = scoredMoves.filter(m => m.score >= topScore - 1); // 默认0.5
```

### 修改界面样式

在 `css/style.css` 中调整：

```css
/* 改变主题色 */
body {
    background: linear-gradient(135deg, #your-color1 0%, #your-color2 100%);
}

/* 调整棋盘颜色 */
.board-container {
    background: #your-board-color;
}
```

## 🐛 已知问题

无重大已知问题。如发现bug，欢迎提交issue。

## 📝 开发日志

- ✅ 完整的象棋规则引擎
- ✅ 中等难度AI对手
- ✅ 手机端完整适配
- ✅ 悔棋功能
- ✅ 可视化走棋提示
- ✅ 将死判定

## 🤝 贡献

欢迎提交Pull Request或Issue！

## 📄 许可证

MIT License - 自由使用和修改

## 👨‍💻 作者

开发一个简单好玩的中国象棋游戏 🎮

---

**享受游戏，挑战AI！** 🏆
